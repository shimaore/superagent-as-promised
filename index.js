// Generated by CoffeeScript 1.8.0
(function() {
  var Promise, Request;

  Request = require('superagent');

  Promise = require('bluebird');

  Request.Request.prototype.endAsync = function() {
    return new Promise((function(_this) {
      return function(resolve, reject) {
        var error;
        try {
          return _this.end(function(error, response) {
            if (error) {
              reject(error);
              return;
            }
            if (response.error) {
              reject(response.error);
              return;
            }
            return resolve(response);
          });
        } catch (_error) {
          error = _error;
          return reject(error);
        }
      };
    })(this));
  };

  Request.Request.prototype.then = function() {
    var _ref;
    return (_ref = this.endAsync()).then.apply(_ref, arguments);
  };

  Request.Request.prototype["catch"] = function() {
    var _ref;
    return (_ref = this.endAsync())["catch"].apply(_ref, arguments);
  };

  module.exports = Request;

}).call(this);
